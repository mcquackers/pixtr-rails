<%= link_to "Create a new group", new_group_path %>
<ul>
  <% @groups.each do |group| %>
    <li><%= link_to "#{group.name}", group_path(group)%> - 
      <% if group.members.include?(current_user) %>
        <%= button_to "Leave Group",
          group_group_membership_path(group, current_user.membership_for(group)), method: :delete %>
      <% else %>
        <%= button_to "Join group", group_group_memberships_path(group) %>
      <% end %>
    </li>
  <% end %>
</ul>
